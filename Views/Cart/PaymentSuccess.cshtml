@{
    ViewBag.Title = "Payment Successful";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .success-container {
        min-height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        position: relative;
        overflow: hidden;
    }

    .success-card {
        background: white;
        border-radius: 20px;
        padding: 3rem;
        text-align: center;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        position: relative;
        z-index: 10;
        max-width: 500px;
        width: 90%;
        animation: slideUp 0.6s ease-out;
    }

    .success-icon {
        width: 100px;
        height: 100px;
        background: #10b981;
        border-radius: 50%;
        margin: 0 auto 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: bounce 1s ease-in-out;
        position: relative;
    }

        .success-icon::after {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            border: 2px solid #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .success-icon i {
            font-size: 3rem;
            color: white;
        }

    .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background: #f59e0b;
        animation: confettiFall 5s linear infinite;
    }

        .confetti:nth-child(2n) {
            background: #ef4444;
        }

        .confetti:nth-child(3n) {
            background: #10b981;
        }

        .confetti:nth-child(4n) {
            background: #3b82f6;
        }

        .confetti:nth-child(5n) {
            background: #8b5cf6;
        }

    .btn-success-custom {
        background: linear-gradient(135deg, #10b981, #059669);
        border: none;
        padding: 12px 30px;
        border-radius: 50px;
        color: white;
        font-weight: 600;
        text-decoration: none;
        display: inline-block;
        margin: 10px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
    }

        .btn-success-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
            color: white;
            text-decoration: none;
        }

    .btn-outline-custom {
        border: 2px solid #10b981;
        color: #10b981;
        background: transparent;
        padding: 10px 25px;
        border-radius: 50px;
        font-weight: 600;
        text-decoration: none;
        display: inline-block;
        margin: 10px;
        transition: all 0.3s ease;
    }

        .btn-outline-custom:hover {
            background: #10b981;
            color: white;
            text-decoration: none;
        }

    .order-details {
        background: #f8fafc;
        border-radius: 15px;
        padding: 1.5rem;
        margin: 2rem 0;
        border-left: 4px solid #10b981;
    }

    @@keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(50px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @@keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
        }

        40% {
            transform: translateY(-20px);
        }

        60% {
            transform: translateY(-10px);
        }
    }

    @@keyframes pulse {
        0% {
            transform: scale(1);
            opacity: 1;
        }

        50% {
            transform: scale(1.1);
            opacity: 0.5;
        }

        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    @@keyframes confettiFall {
        0% {
            transform: translateY(-100px) rotate(0deg);
            opacity: 1;
        }

        100% {
            transform: translateY(100vh) rotate(360deg);
            opacity: 0;
        }
    }

    .celebrate-text {
        font-size: 3rem;
        font-weight: 700;
        background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        animation: colorChange 3s infinite alternate;
    }

    @@keyframes colorChange {
        0% {
            filter: hue-rotate(0deg);
        }

        100% {
            filter: hue-rotate(360deg);
        }
    }

    .welcome-message {
        font-size: 1.2rem;
        color: #6b7280;
        margin-bottom: 2rem;
        line-height: 1.6;
    }

    .next-steps {
        text-align: left;
        background: #f0fdf4;
        padding: 1.5rem;
        border-radius: 10px;
        margin: 2rem 0;
        border-left: 4px solid #10b981;
    }

        .next-steps h4 {
            color: #065f46;
            margin-bottom: 1rem;
        }

        .next-steps ul {
            list-style: none;
            padding: 0;
        }

        .next-steps li {
            padding: 0.5rem 0;
            color: #047857;
            position: relative;
            padding-left: 1.5rem;
        }

            .next-steps li:before {
                content: '✓';
                position: absolute;
                left: 0;
                color: #10b981;
                font-weight: bold;
            }
</style>

<div class="success-container">
    <!-- Confetti Animation -->
    <div id="confetti-container"></div>

    <div class="success-card">
        <div class="success-icon">
            <i class="fas fa-check"></i>
        </div>

        <h1 class="celebrate-text">Payment Successful! 🎉</h1>

        <div class="welcome-message">
            @if (!string.IsNullOrEmpty(ViewBag.Message))
            {
                <p>@ViewBag.Message</p>
            }
            else
            {
                <p>Your payment has been processed successfully! Thank you for your order.</p>
            }
        </div>

        <div class="order-details">
            <h4 style="color: #065f46; margin-bottom: 1rem;">🎊 Order Confirmed!</h4>
            <p style="color: #047857; margin: 0;">
                <i class="fas fa-shield-alt me-2"></i>
                Your order is being processed and will be delivered soon.
            </p>
        </div>

        <div class="next-steps">
            <h4><i class="fas fa-road me-2"></i>What's Next?</h4>
            <ul>
                <li>You'll receive an order confirmation email shortly</li>
                <li>Track your order in your dashboard</li>
                <li>Our driver will contact you for delivery</li>
                <li>Expected delivery within 2-3 business days</li>
            </ul>
        </div>

        <div class="action-buttons">
            <a href="@Url.Action("Dashboard", "Customer")" class="btn-success-custom">
                <i class="fas fa-tachometer-alt me-2"></i>View My Orders
            </a>
            <a href="@Url.Action("Browse", "Customer")" class="btn-outline-custom">
                <i class="fas fa-shopping-bag me-2"></i>Continue Shopping
            </a>
        </div>

        <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #e5e7eb;">
            <small class="text-muted">
                <i class="fas fa-info-circle me-1"></i>
                Need help? <a href="@Url.Action("Contact", "Home")" style="color: #10b981;">Contact our support team</a>
            </small>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://kit.fontawesome.com/your-fontawesome-kit.js"></script>
    <script>
        // Create confetti animation
        function createConfetti() {
            const container = document.getElementById('confetti-container');
            const colors = ['#f59e0b', '#ef4444', '#10b981', '#3b82f6', '#8b5cf6'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 5 + 's';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                container.appendChild(confetti);
            }
        }

        // Add celebration effects
        function celebrate() {
            createConfetti();

            // Add success sound (optional)
            try {
                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmUgBjiN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmUgBjiN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmUgBjiN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmUgBjiN1/LMeSw==');
                audio.volume = 0.3;
                audio.play().catch(e => console.log('Audio play failed:', e));
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        // Start celebration when page loads
        document.addEventListener('DOMContentLoaded', function() {
            celebrate();

            // Add floating animation to success icon
            const icon = document.querySelector('.success-icon');
            setInterval(() => {
                icon.style.transform = 'translateY(-5px)';
                setTimeout(() => {
                    icon.style.transform = 'translateY(0px)';
                }, 500);
            }, 2000);
        });

        // Add cursor follower effect
        document.addEventListener('mousemove', function(e) {
            const cards = document.querySelectorAll('.success-card, .order-details, .next-steps');
            cards.forEach(card => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                card.style.transform = `perspective(1000px) rotateY(${(x - rect.width / 2) / 50}deg) rotateX(${-(y - rect.height / 2) / 50}deg)`;
            });
        });

        // Reset transform on mouse leave
        document.addEventListener('mouseleave', function() {
            const cards = document.querySelectorAll('.success-card, .order-details, .next-steps');
            cards.forEach(card => {
                card.style.transform = 'perspective(1000px) rotateY(0deg) rotateX(0deg)';
            });
        });
    </script>
}